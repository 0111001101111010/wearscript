<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>WearScript by bwhite</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>WearScript</h1>
        <p></p>

        <p class="view"><a href="https://github.com/bwhite/wearscript">View the Project on GitHub <small>bwhite/wearscript</small></a></p>


        <ul>
          <li><a href="https://github.com/bwhite/wearscript/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/bwhite/wearscript/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/bwhite/wearscript">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="wearscript" class="anchor" href="#wearscript"><span class="octicon octicon-link"></span></a>WearScript</h1>

<p>WearScript is a scripting language for wearable computing (currently Google Glass).  Wearables are personal devices and each user is likely to find value from them in a different way.  With this project we hope to make personalization and hacking as easy as possible so you can make your device do what you want.</p>

<p>This has been slimmed down considerably to make it easier to install, the "rest" of the code is in "unstable" but it is unsupported.  We'll be working to gradually move some of the functionality to master.  Ping me in IRC if a certain capability would be useful to you and we'll give it a higher priority.  </p>

<h2>
<a name="code-organization" class="anchor" href="#code-organization"><span class="octicon octicon-link"></span></a>Code Organization</h2>

<ul>
<li>Server: /server</li>
<li>Webapp: /server/static/playground.html</li>
<li>Server admin tools (authorize users, permissions, etc.): /admin</li>
<li>Glass Client (Android app): /glass</li>
<li>Glass Client Prereqs (launchy/opencv/zxing): /glass/thirdparty</li>
<li>3D models for printing and related scripts (AR mount, eye tracker, mirror holder): /hardware</li>
<li>Useful tools (log data scripts, android adb helper, data visualization server): /tools/</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Apache 2.0</p>

<h2>
<a name="intro-video" class="anchor" href="#intro-video"><span class="octicon octicon-link"></span></a>Intro Video</h2>

<p><a href="http://www.youtube.com/watch?v=tOUgybfQp4A"><img src="http://img.youtube.com/vi/tOUgybfQp4A/0.jpg" alt="intro video"></a></p>

<h2>
<a name="client-installation-video" class="anchor" href="#client-installation-video"><span class="octicon octicon-link"></span></a>Client Installation Video</h2>

<p><a href="http://www.youtube.com/watch?v=lUCiqhWnRjg"><img src="http://img.youtube.com/vi/lUCiqhWnRjg/0.jpg" alt="client install"></a></p>

<h2>
<a name="server-installation-video" class="anchor" href="#server-installation-video"><span class="octicon octicon-link"></span></a>Server Installation Video</h2>

<p><a href="http://www.youtube.com/watch?v=vdbE87oJja4"><img src="http://img.youtube.com/vi/vdbE87oJja4/0.jpg" alt="server install"></a></p>

<h2>
<a name="installing-go" class="anchor" href="#installing-go"><span class="octicon octicon-link"></span></a>Installing Go</h2>

<ul>
<li>wget <a href="https://go.googlecode.com/files/go1.1.1.linux-amd64.tar.gz">https://go.googlecode.com/files/go1.1.1.linux-amd64.tar.gz</a>
</li>
<li>tar -xzf go1.1.1.linux-amd64.tar.gz</li>
<li>Put "export GOROOT=/go" and "export GOPATH=/gocode" in your .bashrc</li>
<li>The "gocode" is where packages will be stored and "go" is the location of the extracted folder.</li>
</ul><h2>
<a name="install-redis" class="anchor" href="#install-redis"><span class="octicon octicon-link"></span></a>Install Redis</h2>

<ul>
<li>Follow instructions here <a href="http://redis.io/download">http://redis.io/download</a> (tested on 2.6.*)</li>
</ul><h2>
<a name="install-server" class="anchor" href="#install-server"><span class="octicon octicon-link"></span></a>Install Server</h2>

<ul>
<li>The video above gives a step by step guide</li>
<li>Tested on ubuntu 12.04 LTS, if you want support it helps if you stick with this if possible</li>
<li>Ubuntu packages: apt-get install mercurial</li>
<li>Setup a config.go file (look at config.go.example)</li>
<li>Run /server/install.sh (this does basic dependencies and such)</li>
</ul><h2>
<a name="using-the-playground" class="anchor" href="#using-the-playground"><span class="octicon octicon-link"></span></a>Using the Playground</h2>

<p>The playground is a webapp that connects with WearScript while it is running on Glass.  It allows you to execute scripts and visualize the sensors/images from Glass.</p>

<ul>
<li>Go to the playground page for the server you'd like to use (if it's your first time, you'll sign into your Google account)</li>
<li>After authorizing the webapp with Google, click the QR button the top right</li>
<li>Ensure that Glass has an internet connection, WiFi is highly recommended</li>
<li>On Glass, open up Launchy (go to the far left, tap settings, now you are in Launchy)</li>
<li>Select WearScript</li>
<li>It will show a QR code reader, scan the QR code</li>
<li>If successfull, the buttons on the bottom of the Playground will enable and the Javascript console will show "Connected"</li>
<li>You may now send scripts, two examples are provided (you can click Wear This Scriot or Wear Script From URL)</li>
</ul><h2>
<a name="wearscript-usage-notes" class="anchor" href="#wearscript-usage-notes"><span class="octicon octicon-link"></span></a>WearScript Usage Notes</h2>

<ul>
<li>If you swipe down the script will continue to run in the background, to reset to a blank script press the "Reset" button</li>
<li>At this point the easiest way to turn off WearScript is to reset Glass (hold power button), we are working on this</li>
<li>When calling WS.connect, if the argument passed is exactly '{{WSUrl}}' then it will be replaced with the websocket url corresponding to the server the playground is running on and the last QR code generated.</li>
<li>If you use a script that doesn't make a server connection (i.e., WS.connect('{{WSUrl}}')) then you won't be able to control WearScript from the webapp</li>
<li>More interesting uses of WS.connect include making a custom server for your application and then Glass will connect to it and stream data while your app can continue to control Glass.</li>
<li>If you want to reconnect to the webapp, you can swipe down to exit WearScript and re-enter through Launchy (if the QR doesn't pop up do it again).  When the QR comes up you can swipe down to dismiss it and it'll reuse the last scan.</li>
<li>Every time you press the QR button on the webapp you get a unique scan, while the page is open you may reuse the scan (either by rescanning or the previous downswipe trick) but if you reload the page you must rescan.</li>
<li>Only the last generated QR code is valid.</li>
<li>When using scripts in the Playground editor, make sure to specify http:// or https:// and NOT use refer to links like .  The script you put in the editor will be saved locally on Glass, and links of that form will not work.</li>
<li>If you are connected to a server and use WS.log('Hi!'), that message will show up in the Android logs and the javascript console in the Playground.</li>
</ul><h1>
<a name="syntax" class="anchor" href="#syntax"><span class="octicon octicon-link"></span></a>Syntax</h1>

<p>The code is under rapid development and instead of making a list of supported commands (which will be constantly out of sync), look at the Java class that implements the WS variable <a href="http://goo.gl/eYFyTO">http://goo.gl/eYFyTO</a>.</p>

<h1>
<a name="troubleshooting" class="anchor" href="#troubleshooting"><span class="octicon octicon-link"></span></a>Troubleshooting</h1>

<ul>
<li>"adb: command not found" - Android Dev Tools need to be in your path</li>
</ul><h1>
<a name="admin-operations" class="anchor" href="#admin-operations"><span class="octicon octicon-link"></span></a>Admin Operations</h1>

<p>All of these should be run in the /admin folder</p>

<ul>
<li>List users:  python users.py list_users

<ul>
<li> Each user gets for rows (userid, info, flags, uflags)</li>
<li> You'll need userid for the other commands</li>
</ul>
</li>
<li>Add a user (only needed if config.go has allowAllUsers = false): python users.py {{userid}} set_flag flags user</li>
</ul><h1>
<a name="contactinfo" class="anchor" href="#contactinfo"><span class="octicon octicon-link"></span></a>Contact/Info</h1>

<ul>
<li>Brandyn White (bwhite dappervision com)</li>
<li>IRC freenode #openshades (if you want to collaborate or chat that's the place to be, we give regularly updates as we work here)</li>
<li>G+ Community: <a href="https://plus.google.com/communities/101102785351379725742">https://plus.google.com/communities/101102785351379725742</a> (we post pictures/videos as we go here)</li>
<li>Website: <a href="http://wearscript.com">http://wearscript.com</a> (overall project info, video links)</li>
<li>Youtube: <a href="https://www.youtube.com/channel/UCGy1Zo81X2cRRQ5GQYz8eEQ">https://www.youtube.com/channel/UCGy1Zo81X2cRRQ5GQYz8eEQ</a> (all videos)</li>
</ul><h1>
<a name="openshades" class="anchor" href="#openshades"><span class="octicon octicon-link"></span></a>OpenShades</h1>

<p>OpenShades (the new OpenGlass) is our community name (join us at #openshades on freenode) that we use when hacking together, WearScript is this project specifically.  For demos see <a href="http://openshades.com">http://openshades.com</a>.  Dapper Vision, Inc. (by Brandyn and Andrew) is the sponsor of this project and unless otherwise specified is the copyright owner of the files listed.</p>

<h1>
<a name="hacking" class="anchor" href="#hacking"><span class="octicon octicon-link"></span></a>Hacking</h1>

<h2>
<a name="travis-ci" class="anchor" href="#travis-ci"><span class="octicon octicon-link"></span></a>Travis-CI</h2>

<p>The current test setup just builds the server after each commit.</p>

<p><a href="https://travis-ci.org/bwhite/wearscript"><img src="https://travis-ci.org/bwhite/wearscript.png?branch=master" alt="Build Status"></a></p>

<h2>
<a name="resources" class="anchor" href="#resources"><span class="octicon octicon-link"></span></a>Resources</h2>

<p>These are helpful for development</p>

<ul>
<li><a href="https://code.google.com/p/google-api-go-client/source/browse/mirror/v1/mirror-gen.go">https://code.google.com/p/google-api-go-client/source/browse/mirror/v1/mirror-gen.go</a></li>
<li><a href="http://golang.org/doc/effective_go.html">http://golang.org/doc/effective_go.html</a></li>
<li><a href="https://developers.google.com/glass/playground">https://developers.google.com/glass/playground</a></li>
</ul><h2>
<a name="clock-deskew-and-latency-estimation" class="anchor" href="#clock-deskew-and-latency-estimation"><span class="octicon octicon-link"></span></a>Clock deskew and latency estimation</h2>

<ul>
<li>Glass sends data to server (potentially big) and includes a timestamp (Tg0)</li>
<li>Server sends ack to glass with its own timestamp (Ts0) and the previous timestamp (Tg0)</li>
<li>Glass computes new timestamp (Tg1) and sends back (Tg0, Tg1, Ts0, Tg1)</li>
<li>Server computes k = Tg - Ts (skew), D = D1 = D2  (delay, assuming last two equal), and data delay D0.</li>
<li>D = .5 * (Ts1 - Ts0), k = Tg1 - Ts1 + D, and D0 = Ts0 + k - tg0</li>
</ul><pre><code>Glass        Server
Tg0  - D0 -&gt; Ts0
Tg1 &lt;- D1 -  Ts0
Tg1 -  D2 -&gt; Ts1
</code></pre>

<h2>
<a name="timeline-item-styling" class="anchor" href="#timeline-item-styling"><span class="octicon octicon-link"></span></a>Timeline Item Styling</h2>

<p>For glassware the timeline items are styled using HTML/CSS.  The dev playground helps a lot (link above).</p>

<h2>
<a name="contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors</h2>

<p>See <a href="https://github.com/bwhite/wearscript/graphs/contributors">contributors</a> for details.</p>

<ul>
<li>Brandyn White</li>
<li>Andrew Miller</li>
<li>Scott Greenwald</li>
<li>Kurtis Nelson</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/bwhite">bwhite</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-3970695-13");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>